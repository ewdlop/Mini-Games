#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
快速建立詞庫工具
使用簡單的方法從文本提取中文詞語
不需要下載大型語料庫
"""

import jieba
import re
from collections import defaultdict

class 簡易詞庫建立器:
    def __init__(self):
        self.詞庫 = defaultdict(set)
        
    def 從文本提取(self, 文本):
        """從文本中提取2-4字的中文詞語"""
        # 使用 jieba 分詞
        words = jieba.cut(文本)
        
        for 詞 in words:
            詞 = 詞.strip()
            # 檢查：2-4個字，且都是中文
            if 2 <= len(詞) <= 4 and all('\u4e00' <= c <= '\u9fff' for c in 詞):
                首字 = 詞[0]
                self.詞庫[首字].add(詞)
    
    def 從檔案載入(self, 檔案路徑):
        """從文本檔案載入內容並提取詞語"""
        try:
            with open(檔案路徑, 'r', encoding='utf-8') as f:
                內容 = f.read()
                self.從文本提取(內容)
                print(f"已處理檔案：{檔案路徑}")
        except Exception as e:
            print(f"讀取檔案時發生錯誤：{e}")
    
    def 新增常用詞組(self):
        """新增常用的中文詞組"""
        常用詞 = """
        學習 學校 學生 學習 學期 學費 學問
        生活 生命 生日 生氣 生產 生意
        人生 人類 人民 人物 人才 人情
        工作 工人 工廠 工具 工業
        時間 時代 時候 時刻 時光
        世界 世紀 世代 世俗
        國家 國民 國際 國王
        社會 社區 社團
        文化 文字 文章 文學 文明 文件
        電腦 電話 電影 電視 電子 電力
        音樂 音樂 聲音
        美麗 美食 美術 美好
        快樂 快速 快遞
        朋友 友誼 友好 友情
        愛情 愛心 親愛 可愛
        家庭 家人 家鄉 國家 大家
        地方 地球 地區 地點 土地
        天空 天氣 天堂 天才 天使
        自然 自由 自己 自信
        問題 題目 主題
        方法 方式 方向 方案 地方
        道理 道路 知道
        力量 能力 努力 活力 實力
        機會 機器 機場 手機 飛機 危機
        心情 心理 心靈 愛心 開心 小心
        感覺 感動 感情 感謝
        希望 願望 夢想 理想
        信心 相信 信任 信息
        經驗 經過 經常 已經
        歷史 歷程 經歷
        故事 事情 事業 故鄉
        發展 發現 發生 出發
        成功 成長 成果 完成
        結果 結束 結合 團結
        開始 開心 打開 開會
        需要 必要 重要 主要 不要
        可能 可以 可愛 不可
        應該 應用
        或者 還是 就是 不是 但是 於是
        這個 那個 一個
        什麼 怎麼 為什麼
        因為 所以 如果
        雖然 然而 仍然 自然 當然 突然
        非常 常常 平常 正常 經常
        特別 特殊 特點
        一定 決定 確定 肯定 否定
        真的 真正 真實 認真
        清楚 清潔 清晨
        明白 明天 明星 明顯 光明 說明
        了解 理解 誤解
        認識 知識 意識 常識
        注意 意思 意義 主意 同意 生意 創意
        想法 方法 看法 做法 寫法 說法 辦法
        感受 接受 受到 享受
        表示 表現 表達 表演 代表
        影響 響應 聲響
        關係 關心 關於 相關
        利用 使用 應用 運用 作用 用心
        幫助 助手 輔助
        支持 堅持 持續
        改變 變化 改革 改善 改正
        進步 步驟 腳步
        提高 提供 提醒 提升
        增加 加油 增強 添加
        減少 減輕 削減
        困難 難過 難得 艱難
        容易 輕易 不易
        簡單 單純 簡化 簡便 菜單
        複雜 繁雜
        辛苦 痛苦 刻苦 苦惱
        舒服 服務 衣服
        健康 康復
        安全 安心 平安 晚安
        危險 風險 保險 冒險
        平和 和平 溫和 暖和
        戰爭 爭取 競爭
        勝利 勝負 優勝
        失敗 敗北
        比賽 賽跑 球賽
        遊戲 玩具 玩笑
        運動 動作 活動 行動 感動 運氣 運送
        休息 歇息 消息 信息
        睡覺 覺得 感覺
        吃飯 飯菜 米飯 飯碗
        喝水 水果 淚水 水滴 河水
        食物 食品 飲食 美食 糧食
        水果 果實 結果 成果 芒果 蘋果
        蔬菜 青菜 菜單 飯菜
        肉類 雞肉 豬肉 牛肉
        飲料 料理 材料 資料
        味道 道理 道路 知道
        好吃 難吃
        好喝 能喝
        美味 滋味 氣味 味道 品味
        香味 香港
        臭味 臭氣
        甜蜜 蜜蜂 甜美
        酸甜 酸味
        辣椒 辛辣
        苦澀 苦難
        鹹魚 鹹水
        天氣 氣候 氣溫 氣球 空氣 氣息 氣氛 義氣
        溫度 溫暖 溫柔 氣溫
        熱情 情況 愛情 心情 感情 情緒
        冷淡 淡水 冷靜
        涼快 涼爽
        暖和 溫暖
        春天 春季 青春
        夏天 夏季
        秋天 秋季 秋收
        冬天 冬季
        四季 季節
        早晨 晨曦
        上午 午後 中午
        下午 午後
        晚上 夜晚 晚安 上晚 晚餐
        夜裡 夜市 夜空 深夜 子夜
        深夜 夜深
        今天 昨天 明天 每天 天天
        今年 去年 明年 年代 年輕 青年
        今日 日子 日期 節日 假日 生日
        星期 期間 學期 期待 日期
        月亮 月份 歲月
        週末 週年
        假日 假期 放假 休假 度假
        節日 春節 過節
        慶祝 祝福 祝賀 慶典
        禮物 禮貌 禮節 禮品
        送禮 贈送 運送 傳送 發送
        收到 收穫 收入 接收
        拿到 拿起 拿走
        給予 給與 交給 送給
        得到 獲得 取得 贏得 覺得
        失去 去年 過去 去處
        離開 分離 離別
        回來 回家 回答 回憶 回顧
        返回 歸還
        出去 出來 出發 出現 出口
        進來 進入 進步 前進 改進
        上去 上來 上面 路上 晚上
        下去 下來 下面 一下 天下
        前面 前方 前進 目前 從前
        後面 後來 最後 背後
        左邊 左右
        右邊 左右
        旁邊 身邊 海邊 邊界
        中間 時間 空間 人間 民間
        裡面 心裡 屋裡
        外面 例外 外國 意外 室外
        東西 東方 東京
        西方 西瓜 廣西
        南方 南京 江南
        北方 北京 台北 河北
        上下 天下 一下 落下
        高低 高度 高興 高中 提高
        大小 小孩 小心 大小 小姐 小時
        長短 短暫 長短 長久 成長
        寬窄 寬廣 寬容
        遠近 遠方 永遠 遙遠
        快慢 快樂 快速 飛快 趕快
        新舊 新年 新鮮 新聞 全新
        舊事 懷舊
        多少 少年 少數 減少 至少
        好壞 壞人
        對錯 錯誤 不錯 過錯
        是非 非常 除非 並非
        真假 假日 假期 放假
        善惡 善良 改善 慈善 完善
        美醜 醜陋
        貧富 富有 富裕 豐富 財富
        貴賤 貴重 珍貴 昂貴 高貴
        強弱 強大 強烈 增強 加強
        弱點 軟弱
        厚薄 厚度 深厚
        薄弱 輕薄
        輕重 輕鬆 年輕 輕易 輕視 減輕
        重要 重量 嚴重 尊重
        深淺 深度 深刻 深夜 深入 深厚
        淺顯 膚淺
        明暗 明天 明白 明星 光明 透明 說明 聰明 文明
        暗示 黑暗
        """
        self.從文本提取(常用詞)
        print("已新增常用詞組")
    
    def 合併現有詞庫(self, 檔案路徑="詞庫.txt"):
        """合併現有詞庫"""
        try:
            with open(檔案路徑, 'r', encoding='utf-8') as f:
                for 行 in f:
                    parts = 行.strip().split('|')
                    if len(parts) >= 2:
                        首字 = parts[0]
                        for 詞 in parts[1:]:
                            self.詞庫[首字].add(詞)
            print(f"已合併現有詞庫：{檔案路徑}")
        except FileNotFoundError:
            print(f"未找到檔案：{檔案路徑}")
    
    def 保存詞庫(self, 輸出檔案="詞庫.txt"):
        """保存詞庫"""
        with open(輸出檔案, 'w', encoding='utf-8') as f:
            for 首字 in sorted(self.詞庫.keys()):
                詞語列表 = sorted(list(self.詞庫[首字]))
                if 詞語列表:
                    f.write(首字 + '|' + '|'.join(詞語列表) + '\n')
        
        總詞數 = sum(len(詞語集) for 詞語集 in self.詞庫.values())
        print(f"\n詞庫已保存到：{輸出檔案}")
        print(f"首字數量：{len(self.詞庫)}")
        print(f"詞語總數：{總詞數}")

def main():
    print("=" * 60)
    print("快速建立詞庫工具")
    print("=" * 60)
    
    建立器 = 簡易詞庫建立器()
    
    # 合併現有詞庫
    建立器.合併現有詞庫("詞庫.txt")
    
    # 新增常用詞組
    建立器.新增常用詞組()
    
    # 保存
    建立器.保存詞庫("詞庫.txt")
    
    print("\n完成！詞庫已更新")

if __name__ == "__main__":
    main()

